<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Record Checker Result</title>
    <style type="text/css">
        .tile {
            font-size: 36px;
        }


        .game-caption {
            font-size: 24px;
        }
    </style>
</head>
<body>

<p class="tile">🀀🀁🀂🀃🀄🀅🀆🀇🀈🀉🀊🀋🀌🀍🀎🀏🀐🀑🀒🀓🀔🀕🀖🀗🀘🀙🀚🀛🀜🀝🀞🀟🀠🀡</p>

<p> Player: {{ player }} </p>
<p>{{ record }} <a href="{{ log_url }}">Link</a></p>

{% for game in games %}
    <div>
        <details open>
            <summary><span class="game-caption">{{ game.name }}</span></summary>
            <table>
                <tr>
                    <th>Round <br>(巡目)</th>
                    <th>Hand <br>(手牌)</th>
                    <th>Your Choice <br>(你的选择)</th>
                    <th>Expected Choice <br>(期望选择)</th>
                    <th>Reasoning <br>(牌理)</th>
                </tr>
                {% for round in game.rounds %}
                    <tr style="background-color: {% if round.somebody_richii %} rgba(0, 0, 255, {% else %} rgba(255, 0, 0, {% endif %}{{ round.wrong_rate }});">
                        <td>{{ loop.index }}</td>
                        <td class="tile">{{ round.hand }}</td>
                        <td class="tile">{{ round.your_choice_reasoning.discard_tile }}</td>
                        <td class="tile">
                            {% for reasoning in round.expected_reasonings %}
                                {{ reasoning.discard_tile }}
                            {% endfor %}
                        </td>
                        <td>
                            <details>
                                <summary>
                                    Expected: Steps {{ round.expected_reasonings[0].waiting_step }}
                                    Tiles {{ round.expected_reasonings[0].useful_tiles_count }},
                                    Actual: Steps {{ round.your_choice_reasoning.waiting_step }}
                                    Tiles {{ round.your_choice_reasoning.useful_tiles_count }}
                                </summary>
                                {% for reasoning in round.merged_reasoning %}
                                    <div>Discard{{ reasoning.discard_tile }}
                                        Expect <span>{{ reasoning.useful_tiles }}</span>,
                                        {{ reasoning.waiting_step }} Waiting Steps
                                        {{ reasoning.useful_tiles_count }} Tiles
                                    </div>
                                {% endfor %}
                                <details>
                                    <summary>
                                        Normal-Type Reasoning
                                    </summary>
                                    {% for reasoning in round.normal_reasonings %}
                                        <div>Discard{{ reasoning.discard_tile }}
                                            Expect <span>{{ reasoning.useful_tiles }}</span>,
                                            {{ reasoning.waiting_step }} Waiting Steps
                                            {{ reasoning.useful_tiles_count }} Tiles
                                        </div>
                                    {% endfor %}
                                </details>
                                <details>
                                    <summary>
                                        Seven-Pair Reasoning
                                    </summary>
                                    {% for reasoning in round.seven_pair_reasonings %}
                                        <div>Discard{{ reasoning.discard_tile }}
                                            Expect <span>{{ reasoning.useful_tiles }}</span>,
                                            {{ reasoning.waiting_step }} Waiting Steps
                                            {{ reasoning.useful_tiles_count }} Tiles
                                        </div>
                                    {% endfor %}
                                </details>
                            </details>

                        </td>
                    </tr>
                {% endfor %}
            </table>
        </details>
    </div>
{% endfor %}
</body>
</html>